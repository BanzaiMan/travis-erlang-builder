#!/usr/bin/env bash

set -o errexit

[[ ${ERLANG_VERSION} ]] || {
  echo 'Missing $ERLANG_VERSION' >&2
  exit 1
}

kerl update releases
kerl list builds | if ! grep -q "^${ERLANG_VERSION},${ERLANG_VERSION}\$" ; then
  kerl build "${ERLANG_VERSION}" "${ERLANG_VERSION}"
fi
kerl install "${ERLANG_VERSION}" "${HOME}/otp/${ERLANG_VERSION}"
